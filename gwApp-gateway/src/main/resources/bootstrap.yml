server:
  port: ${server.ports.http.gwApp-gateway}
  tongweb:
    license:
      path: ./license.dat

spring:
  profiles:
    active: dev
  application:
    name: gwApp-gateway
  codec:
    max-in-memory-size: 1048576000
  cloud:
    nacos:
      username: nacos
      password: nacos
      server-addr: 172.17.13.45:8848,172.17.13.46:8848,172.17.13.47:8848
      config:
        file-extension: yml
        shared-configs:
          - data-id: public-${spring.profiles.active}.yml
          - data-id: dynamic-${spring.profiles.active}.yml
            refresh: true
      discovery:
        namespace: public
    gateway:
      discovery:
        locator:
          enabled: true #开启从注册中心动态创建路由的功能，利用微服务名进行路由
      #      httpclient:
      #        connect-timeout: 3000 #请求连接时间
      #        response-timeout: PT5S #请求响应时间
      routes:
        - id: gwApp-system-route #系统管理模块路由ID
          uri: lb://gwApp-system
          predicates:
            - Path=/system/**
        - id: gwApp-auth-route #登录管理模块路由ID
          uri: lb://gwApp-security
          predicates:
            - Path=/auth/**
        - id: gwApp-push-route #推送模块路由ID
          uri: lb://gwApp-push
          predicates:
            - Path=/push/**
        - id: gwApp-openoffice-route #openoffice接口模块路由ID
          uri: lb://gwApp-openoffice
          predicates:
            - Path=/app/openoffice/**
        - id: gwApp-miniapp-route #miniapp接口模块路由ID
          uri: lb://gwApp-miniapp
          predicates:
            - Path=/app/miniapp/**
        - id: gwApp-app-route #app接口模块路由ID
          uri: lb://gwApp-app
          predicates:
            - Path=/app/**
      enabled: true
      default-filters:
        - name: RequestSize
          args:
            maxSize: 1000000
      predicate:
        weight:
          enabled: false
  servlet:
    multipart:
      max-file-size: 104857600
      max-request-size: 1048576000
  main:
    web-application-type: reactive
    allow-bean-definition-overriding: true

logging:
  config: classpath:logback-nacos.xml

#静态资源映射
static-rewrite:
  static-resources:
    # 路径需要转译
    '[/file/**]': file:D:/gwApp/