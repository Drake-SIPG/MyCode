<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sse.sseapp.mapper.system.SysProxyConfigMapper">

    <resultMap type="com.sse.sseapp.domain.system.SysProxyConfig" id="SysProxyConfigResult">
        <id property="id" column="id"/>
        <result property="code" column="code"/>
        <result property="name" column="name"/>
        <result property="method" column="method"/>
        <result property="proxyUri" column="proxy_uri"/>
        <result property="proxyType" column="proxy_type"/>
        <result property="encryption" column="encryption"/>
        <result property="urlPrefix" column="url_prefix"/>
        <result property="requestTimeout" column="request_timeout"/>
    </resultMap>

    <sql id="selectSysProxyConfigVo">
        SELECT
            id,
            code,
            name,
            method,
            proxy_uri,
            proxy_type,
            encryption,
            url_prefix,
            request_timeout
        FROM app_proxy_config
    </sql>

    <select id="selectSysProxyConfigList" parameterType="com.sse.sseapp.domain.system.SysProxyConfig" resultMap="SysProxyConfigResult">
        <include refid="selectSysProxyConfigVo"/>
        <where>
            <if test="code != null and code != ''">
                AND code LIKE CONCAT('%', #{code}, '%')
            </if>
            <if test="name != null and name != ''">
                AND name LIKE CONCAT('%', #{name}, '%')
            </if>
            <if test="proxyType != null and proxyType != ''">
                AND proxy_type LIKE CONCAT('%', #{proxyType}, '%')
            </if>
        </where>
    </select>

    <select id="selectSysProxyConfigById" parameterType="Long" resultMap="SysProxyConfigResult">
        <include refid="selectSysProxyConfigVo"/>
        WHERE id = #{sysProxyConfigId}
    </select>

    <insert id="insertSysProxyConfig" parameterType="com.sse.sseapp.domain.system.SysProxyConfig" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO app_proxy_config(
        <if test="id != null and id != 0">id,</if>
        <if test="code != null and code != ''">code,</if>
        <if test="name != null and name != ''">name,</if>
        <if test="method != null and method != ''">method,</if>
        <if test="proxyUri != null and proxyUri != ''">proxy_uri,</if>
        <if test="proxyType != null and proxyType != ''">proxy_type,</if>
        <if test="encryption != null">encryption,</if>
        <if test="urlPrefix != null">url_prefix,</if>
        <if test="requestTimeout != null">request_timeout</if>
        )VALUES(
        <if test="id != null and id != 0">#{id},</if>
        <if test="code != null">#{code},</if>
        <if test="name != null and name != ''">#{name},</if>
        <if test="method != null and method != ''">#{method},</if>
        <if test="proxyUri != null and proxyUri != ''">#{proxyUri},</if>
        <if test="proxyType != null and proxyType != ''">#{proxyType},</if>
        <if test="encryption != null">#{encryption},</if>
        <if test="urlPrefix != null">#{urlPrefix},</if>
        <if test="requestTimeout != null">#{requestTimeout}</if>
        )
    </insert>

    <update id="updateSysProxyConfig" parameterType="com.sse.sseapp.domain.system.SysProxyConfig">
        UPDATE app_proxy_config
        <set>
            <if test="code != null and code != ''">code = #{code},</if>
            <if test="name != null and name != ''">name = #{name},</if>
            <if test="method != null and method != ''">method = #{method},</if>
            <if test="proxyUri != null and proxyUri != ''">proxy_uri = #{proxyUri},</if>
            <if test="proxyType != null and proxyType != ''">proxy_type = #{proxyType},</if>
            <if test="encryption != null">encryption = #{encryption},</if>
            <if test="urlPrefix != null">url_prefix = #{urlPrefix},</if>
            <if test="requestTimeout != null">request_timeout = #{requestTimeout}</if>
        </set>
        WHERE id = #{id}
    </update>

    <delete id="deleteSysProxyConfigById" parameterType="Long">
        DELETE FROM app_proxy_config WHERE id = #{id}
    </delete>

    <delete id="deleteSysProxyConfigByIds" parameterType="Long">
        DELETE FROM app_proxy_config WHERE id IN
        <foreach collection="array" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>